I"K<p>The title is from James Fry’s classic <a href="https://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html">A Brief, Incomplete, and Mostly Wrong History of Programming Languages</a>, an hilarious rundown of various programming languages. The statement was lifted from an observation in Saunders Mac Lane’s <em>Categories for The Working Mathematician</em>:</p>

<blockquote>
  <p>All told, a monad in X is just a monoid in the category of endofunctors of X, with product × replaced by composition of endofunctors and unit set by the identity endofunctor.</p>
</blockquote>

<p>Monads are known for being difficult to learn, and this phrase is a well-known joke in the functional programming community, the joke being that it doesn’t make sense to anyone who doesn’t already understand it.</p>

<p>The goal is to explain this statement to someone who knows some category theory (e.g. the definition of a category, functors), but has yet to put the pieces together.</p>

<!--more-->

<p>We will review the definitions in light detail, assuming the reader is familiar. We will also omit some technical requirements, such as commutative diagrams and coherence conditions. To start, we will slightly amend the statement for clarity:</p>

<blockquote>
  <p>A monad is an example of a monoid in the category of endofunctors.</p>
</blockquote>

<p>Or in symbols,</p>

\[M \text{ is a monad} \implies M \text{ is a monoid in the category of endofunctors}.\]

<p>Notice that the implication is one-way i.e. the converse is not necessarily true. More on this later.</p>

<h2 id="monoidal-categories">Monoidal Categories</h2>

<p>A <strong>monoidal category</strong> \((C, \otimes, I)\) is a category \(C\) equipped with</p>

<ul>
  <li>\(\otimes : C \times C \rightarrow C\), a bifunctor called the <strong>monoidal product</strong>.</li>
  <li>\(I\), an object in \(C\) that behaves like the identity with \(\otimes\).</li>
</ul>

<p>A <strong>monoid object</strong>, or simply <strong>monoid</strong>, is an object \(A\) in \(C\) with two arrows:</p>

\[\begin{align*}
  &amp; \eta : I          &amp;&amp; \rightarrow A\\
  &amp; \mu : A \otimes A &amp;&amp; \rightarrow A
\end{align*}\]

<p><strong>Example:</strong> \((\textbf{Set}, \times, *)\) is a monoidal category where \(\times\) is cartesian product and \(*\) is any singleton set. A monoid object in this category is a set \(A\) with functions</p>

\[\begin{align*}
  &amp; \eta : *         &amp;&amp; \rightarrow A\\
  &amp; \mu : A \times A &amp;&amp; \rightarrow A
\end{align*}\]

<p>This yields the familiar definition of a monoid from abstract algebra i.e. a set with a binary function (\(\mu\)) and an identity (given by \(\eta\)).</p>

<p>To see this, consider the cyclic group \(\mathbb{Z}/n\mathbb{Z} := \{1, 2, \ldots, n\}\) and define functions</p>

\[\begin{align*}
  &amp; \eta(x)   &amp;&amp; \to 0\\
  &amp; \mu(x, y) &amp;&amp; \to x + y \pmod n
\end{align*}\]

<p>This gives us the monoidal structure and is equivalent to the more abstract definition given above.</p>

<h2 id="monads">Monads</h2>

<p>Given a category \(C\), a <strong>monad</strong> is a triple \((T, \eta, \mu)\) with</p>

<ul>
  <li>\(T : C \rightarrow C\), an endofunctor on \(C\).</li>
  <li>Natural transformations:</li>
</ul>

\[\begin{align*}
  &amp; \eta : 1_C      &amp;&amp; \rightarrow T\\
  &amp; \mu : T \circ T &amp;&amp; \rightarrow T
\end{align*}\]

<p>where \(1_C\) is the identity functor on \(C\) and \(T \circ T\) is \(T\) composed with itself. Note that \(T \circ T\) is sometimes written as \(T^2\).</p>

<p><strong>Example:</strong> Again consider \(\textbf{Set}\), and let \(T : \textbf{Set} \rightarrow \textbf{Set}\) be the power set functor. Then \((T, \eta, \mu)\) is a monad on \(\textbf{Set}\) where \(\eta\) maps each \(a \in A\) to \(\{a\}\), and \(\mu\) maps a nested set to its union. That is,</p>

\[\begin{align*}
  &amp; \eta(A) = \bigcup_{a \in A} \{a\} \\
  &amp; \mu(A) = \bigcup_{a \in A} a
\end{align*}\]

<h2 id="category-of-endofunctors">Category of Endofunctors</h2>

<p>Every category \(C\) gives rise to a category of endofunctors \(\text{End}_C\). The objects in this category are endofunctors \(T : C \rightarrow C\), and the arrows are natural transformations.</p>

<h2 id="putting-it-all-together">Putting it all together</h2>

<p>\((\text{End}_C, \circ, 1_C)\) is a monoidal category with \(\circ\) as <em>functor</em> composition. A monoid in this category, then, is an endofunctor \(T\) with natural transformations:</p>

\[\begin{align*}
  &amp; \eta : 1_C      &amp;&amp; \rightarrow T\\
  &amp; \mu : T \circ T &amp;&amp; \rightarrow T
\end{align*}\]

<p>This is exactly the definition of a monad! Putting it back into words:</p>

<blockquote>
  <p>A monad \((T, \eta, \mu)\) is a monoid in \((\text{End}_C, \circ, 1_C)\).</p>
</blockquote>

<h2 id="coda">Coda</h2>

<p>Remember this comment?</p>

<blockquote>
  <p>Notice that the implication is one-way i.e. the converse is not necessarily true.</p>
</blockquote>

<p>This is due to there being more than one way of defining a “monoid in the category of endofunctors”. We have defined the monoidal product \(\otimes\) to be \(\circ\), functor composition. In this case, yes, a monoid in this category is exactly a monad.</p>

<p>But observe that this definition leaves open the possibility of using a different monoidal product. In particular, we could take \(\otimes\) to be <strong>Day Convolution</strong>, sometimes written as \(\star\). In this case we get a <em>different</em> “monoid in the category of endofunctors”, and in fact a monoid in this category is a <strong>lax monoidal functor</strong>, not a monad.</p>
:ET